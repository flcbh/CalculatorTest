{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Service } from \"../calculator/calculator.service\";\nlet CalculatorComponent = class CalculatorComponent {\n  constructor(Service) {\n    this.Service = Service;\n    this.input = '';\n    this.result = '';\n    this.Calculator = {};\n  }\n  pressNum(num) {\n    //Do Not Allow . more than once\n    if (num == \".\") {\n      if (this.input != \"\") {\n        const lastNum = this.getLastOperand();\n        console.log(lastNum.lastIndexOf(\".\"));\n        if (lastNum.lastIndexOf(\".\") >= 0) return;\n      }\n    }\n    //Do Not Allow 0 at beginning. \n    //Javascript will throw Octal literals are not allowed in strict mode.\n    if (num == \"0\") {\n      if (this.input == \"\") {\n        return;\n      }\n      const PrevKey = this.input[this.input.length - 1];\n      if (PrevKey === '/' || PrevKey === '*' || PrevKey === '-' || PrevKey === '+') {\n        return;\n      }\n    }\n    this.input = this.input + num;\n    this.calcAnswer();\n  }\n  getLastOperand() {\n    let pos;\n    console.log(this.input);\n    pos = this.input.toString().lastIndexOf(\"+\");\n    if (this.input.toString().lastIndexOf(\"-\") > pos) pos = this.input.lastIndexOf(\"-\");\n    if (this.input.toString().lastIndexOf(\"*\") > pos) pos = this.input.lastIndexOf(\"*\");\n    if (this.input.toString().lastIndexOf(\"/\") > pos) pos = this.input.lastIndexOf(\"/\");\n    console.log('Last ' + this.input.substr(pos + 1));\n    return this.input.substr(pos + 1);\n  }\n  pressOperator(op) {\n    //Do not allow operators more than once\n    const lastKey = this.input[this.input.length - 1];\n    if (lastKey === '/' || lastKey === '*' || lastKey === '-' || lastKey === '+') {\n      this.Calculator.operation = lastKey;\n      console.log(\"Operation \" + this.Calculator.operation);\n      this.input = '';\n      return;\n    }\n    this.input = this.input;\n    this.calcAnswer();\n  }\n  clear() {\n    if (this.input != \"\") {\n      this.input = this.input.substr(0, this.input.length - 1);\n    }\n  }\n  allClear() {\n    this.result = '';\n    this.input = '';\n  }\n  calcAnswer() {\n    let formula = this.input;\n    let lastKey = formula[formula.length - 1];\n    if (lastKey === '.') {\n      formula = formula.substr(0, formula.length - 1);\n    }\n    lastKey = formula[formula.length - 1];\n    if (lastKey === '/' || lastKey === '*' || lastKey === '-' || lastKey === '+' || lastKey === '.') {\n      formula = formula.substr(0, formula.length - 1);\n    }\n    if (this.Calculator.operation === '/' || this.Calculator.operation === '*' || this.Calculator.operation === '-' || this.Calculator.operation === '+') {\n      this.Calculator.value2 = +formula;\n    } else {\n      this.Calculator.value1 = +formula;\n    }\n    console.log(\"Formula \" + formula);\n    console.log(\"input \" + this.input);\n    console.log(\"Value1 \" + this.Calculator.value1);\n    console.log(\"Value2 \" + this.Calculator.value2);\n    this.result = Service.getCalculator(this.Calculator); //eval(formula);\n    this.Calculator.operation = '';\n  }\n  getAnswer() {\n    this.calcAnswer();\n    this.input = this.result;\n    if (this.input == \"0\") this.input = \"\";\n  }\n};\nCalculatorComponent = __decorate([Component({\n  selector: 'ng-calculator',\n  templateUrl: './calculator.component.html'\n})], CalculatorComponent);\nexport { CalculatorComponent };","map":{"version":3,"mappings":"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","names":["Component","Service","CalculatorComponent","constructor","pressNum","num","input","lastNum","getLastOperand","console","log","lastIndexOf","PrevKey","length","calcAnswer","pos","toString","substr","pressOperator","op","lastKey","Calculator","operation","clear","allClear","result","formula","value2","value1","getCalculator","getAnswer","selector","templateUrl"],"sourceRoot":"","sources":["C:\\Users\\Frank Coelho\\OneDrive\\Test\\CalculatorTest\\CalculatorTest\\CalculatorTest.Web\\ClientApp\\src\\app\\calculator\\calculator.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { NgForm } from \"@angular/forms\";\r\nimport { Calculator } from '../model/calculator-view-model';\r\nimport { Service } from \"../calculator/calculator.service\";\r\n\r\n\r\n@Component({\r\n  selector: 'ng-calculator',\r\n  templateUrl: './calculator.component.html',\r\n})\r\nexport class CalculatorComponent {\r\n\r\n\r\n  input: string = '';\r\n  result: string = '';\r\n  Calculator = {} as Calculator;\r\n\r\n  constructor(private Service: Service) { }\r\n\r\n\r\n\r\n  pressNum(num: string) {\r\n\r\n    //Do Not Allow . more than once\r\n    if (num == \".\") {\r\n      if (this.input != \"\") {\r\n\r\n        const lastNum = this.getLastOperand()\r\n        console.log(lastNum.lastIndexOf(\".\"))\r\n        if (lastNum.lastIndexOf(\".\") >= 0) return;\r\n      }\r\n    }\r\n\r\n    //Do Not Allow 0 at beginning. \r\n    //Javascript will throw Octal literals are not allowed in strict mode.\r\n    if (num == \"0\") {\r\n      if (this.input == \"\") {\r\n        return;\r\n      }\r\n      const PrevKey = this.input[this.input.length - 1];\r\n      if (PrevKey === '/' || PrevKey === '*' || PrevKey === '-' || PrevKey === '+') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.input = this.input + num\r\n    this.calcAnswer();\r\n  }\r\n\r\n\r\n  getLastOperand() {\r\n    let pos: number;\r\n    console.log(this.input)\r\n    pos = this.input.toString().lastIndexOf(\"+\")\r\n    if (this.input.toString().lastIndexOf(\"-\") > pos) pos = this.input.lastIndexOf(\"-\")\r\n    if (this.input.toString().lastIndexOf(\"*\") > pos) pos = this.input.lastIndexOf(\"*\")\r\n    if (this.input.toString().lastIndexOf(\"/\") > pos) pos = this.input.lastIndexOf(\"/\")\r\n    console.log('Last ' + this.input.substr(pos + 1))\r\n    return this.input.substr(pos + 1)\r\n  }\r\n\r\n\r\n  pressOperator(op: string) {\r\n\r\n    //Do not allow operators more than once\r\n    const lastKey = this.input[this.input.length - 1];\r\n    if (lastKey === '/' || lastKey === '*' || lastKey === '-' || lastKey === '+') {\r\n      this.Calculator.operation = lastKey;\r\n      console.log(\"Operation \" + this.Calculator.operation);\r\n      this.input = '';\r\n      return;\r\n    }\r\n\r\n    this.input = this.input\r\n    this.calcAnswer();\r\n  }\r\n\r\n\r\n  clear() {\r\n    if (this.input != \"\") {\r\n      this.input = this.input.substr(0, this.input.length - 1)\r\n    }\r\n  }\r\n\r\n  allClear() {\r\n    this.result = '';\r\n    this.input = '';\r\n  }\r\n\r\n  calcAnswer() {\r\n    let formula = this.input;\r\n\r\n    let lastKey = formula[formula.length - 1];\r\n\r\n    if (lastKey === '.') {\r\n      formula = formula.substr(0, formula.length - 1);\r\n    }\r\n\r\n    lastKey = formula[formula.length - 1];\r\n\r\n    if (lastKey === '/' || lastKey === '*' || lastKey === '-' || lastKey === '+' || lastKey === '.') {\r\n      formula = formula.substr(0, formula.length - 1);\r\n\r\n    }\r\n\r\n    if (this.Calculator.operation === '/' || this.Calculator.operation === '*' || this.Calculator.operation === '-' || this.Calculator.operation === '+') {\r\n      this.Calculator.value2 = +formula;\r\n    }\r\n    else {\r\n      this.Calculator.value1 = +formula;\r\n    }\r\n\r\n    console.log(\"Formula \" + formula);\r\n    console.log(\"input \" + this.input);\r\n    console.log(\"Value1 \" + this.Calculator.value1);\r\n    console.log(\"Value2 \" + this.Calculator.value2);\r\n\r\n\r\n    this.result = Service.getCalculator(this.Calculator); //eval(formula);\r\n    this.Calculator.operation = '';\r\n  }\r\n\r\n  getAnswer() {\r\n    this.calcAnswer();\r\n    this.input = this.result;\r\n    if (this.input == \"0\") this.input = \"\";\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}